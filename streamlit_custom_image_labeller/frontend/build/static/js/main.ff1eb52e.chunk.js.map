{"version":3,"sources":["CustomImageLabeller.tsx","index.tsx"],"names":["withStreamlitConnection","props","pointColor","args","canvasWidth","canvasHeight","imageData","canvasRef","useRef","useState","x","point","y","setPoint","useEffect","context","current","getContext","idata","createImageData","data","set","putImageData","fillStyle","fillRect","Streamlit","setFrameHeight","setComponentValue","ref","onClick","e","clientX","clientY","handleCanvasClick","width","height","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"uPAyDeA,eApCa,SAACC,GACzB,IAAMC,EAAaD,EAAME,KAAKD,WAC9B,EAA6DD,EAAME,KAA3DC,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,aAAcC,EAAnC,EAAmCA,UAE7BC,EAAYC,iBAA0B,MAC5C,EAA0BC,mBAAqB,CAACC,EAAET,EAAME,KAAKQ,MAAMD,EAAGE,EAAEX,EAAME,KAAKQ,MAAMC,IAAzF,mBAAOD,EAAP,KAAcE,EAAd,KAmBA,OAbAC,qBAAU,WACN,IACMC,EADYR,EAAUS,QACDC,WAAW,MAChCC,EAAQH,EAASI,gBAAgBf,EAAaC,GACpDa,EAAME,KAAKC,IAAIf,GACfS,EAASO,aAAaJ,EAAO,EAAG,GAChCH,EAASQ,UAAYrB,EACrBa,EAASS,SAASb,EAAMD,EAAGC,EAAMC,EAAG,EAAG,GAEvCa,IAAUC,iBACVD,IAAUE,kBAAkB,CAACjB,EAAEC,EAAMD,EAAGE,EAAED,EAAMC,MACjD,CAACD,EAAOL,IAGP,6BACI,4BACIsB,IAAKrB,EACLsB,QAAS,SAACC,IArBI,SAACA,GACvBjB,EAAS,2BAAIF,GAAL,IAAYD,EAAEoB,EAAEC,QAASnB,EAAEkB,EAAEE,WAoBdC,CAAkBH,IACjCI,MAAS9B,EACT+B,OAAU9B,QC/C1B+B,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.ff1eb52e.chunk.js","sourcesContent":["import React, { useEffect, useState, useRef} from \"react\"\nimport {\n    ComponentProps,\n    Streamlit,\n    withStreamlitConnection,\n} from \"streamlit-component-lib\"\n// import { fabric } from \"fabric\"\n\ninterface PointProps {\n    x:number\n    y:number\n}\n\ninterface PythonArgs {\n    canvasWidth: number\n    canvasHeight: number\n    point: PointProps\n    pointColor: string\n    imageData: Uint8ClampedArray\n}\n\nconst CustomImageLabeller = (props: ComponentProps) => {\n    const pointColor = props.args.pointColor\n    const { canvasWidth, canvasHeight, imageData }: PythonArgs = props.args\n\n    const canvasRef = useRef<HTMLCanvasElement>(null)\n    const [point, setPoint] = useState<PointProps>({x:props.args.point.x, y:props.args.point.y})\n\n    const handleCanvasClick = (e: React.MouseEvent<HTMLCanvasElement, MouseEvent>) =>{\n        setPoint({...point, x:e.clientX, y:e.clientY})\n    }\n\n    useEffect(() => {\n        const canvasObj = canvasRef.current;\n        const context = canvasObj!.getContext(\"2d\");\n        const idata = context!.createImageData(canvasWidth, canvasHeight)\n        idata.data.set(imageData)\n        context!.putImageData(idata, 0, 0)\n        context!.fillStyle = pointColor;\n        context!.fillRect(point.x, point.y, 3, 3)\n        \n        Streamlit.setFrameHeight()\n        Streamlit.setComponentValue({x:point.x, y:point.y});\n    }, [point, imageData])\n    \n    return (\n        <div>\n            <canvas\n                ref={canvasRef}\n                onClick={(e)=>{handleCanvasClick(e)}}\n                width = {canvasWidth}\n                height = {canvasHeight}\n            />\n        </div>\n    )\n}\n\nexport default withStreamlitConnection(CustomImageLabeller)","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport CustomImageLabeller from \"./CustomImageLabeller\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <CustomImageLabeller/>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}